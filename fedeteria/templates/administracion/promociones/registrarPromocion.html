{% extends 'basic-structure-administracion.html' %}
<!--  -->
{% block title %}
<title>Panel administracion | Fedeteria</title>
{% endblock %}
<!--  -->
{% block second_navbar %}
<a
  href="/administracion"
  class="font-semibold text-gray-400 hover:underline"
>
  Administracion
</a>
<span class="mx-5 font-bold text-gray-500"> / </span>
<a
  href="/administracion"
  class="font-semibold text-gray-400 hover:underline"
>
  Trueques por sucursal
</a>

{% endblock %}
<!--  -->
{% block main %}

<div
  class="my-auto flex min-h-full flex-col justify-center max-w-[95vw] sm:max-w-5xl w-full border py-8 px-16 rounded-lg bg-gray-100 shadow-md"
>
  <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-2xl">
    <!-- action="{% url 'administracion:registrarPromocion' %}" -->
    <form
      method="post"
      enctype="multipart/form-data"
    >
      {% csrf_token %}
      <div class="space-y-12">
        <div class="border-b border-neutral-900/10 pb-12">
          <h2 class="text-lg font-medium leading-7 underline text-neutral-900">
            Ingresá los datos del producto de la ferreteria a promocionar
          </h2>

          {% if messages %} {% for message in messages %}
          <div>
            {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
            <div
              class="bg-red-500 text-white p-4 rounded-lg shadow-md"
              role="alert"
            >
              {{ message }}
            </div>
            {% else %}
            <div
              class="bg-green-500 text-white p-4 rounded-lg shadow-md"
              role="alert"
            >
              {{ message }}
            </div>
            {% endif %}
          </div>
          {% endfor %} {% endif %}
        </div>
        <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
          <!-- Nombre -->
          <div class="col-span-2 sm:col-span-4">
            <label
              for="nombre"
              class="block text-base font-medium leading-6 text-neutral-900"
            >
              Nombre producto
            </label>
            <div class="sm:mt-2">
              <input
                type="text"
                name="nombre"
                id="nombre"
                placeholder="Nombre de producto"
                autocomplete="given-name"
                class="block w-full rounded-md border-0 px-2 py-1.5 text-neutral-900 shadow-sm outline-none ring-1 ring-inset ring-neutral-300 placeholder:text-neutral-400 hover:ring-1 hover:ring-amber-700 focus:ring-2 focus:ring-inset focus:ring-amber-600 sm:text-sm sm:leading-6"
                required
              />
            </div>
          </div>
          <!-- id -->
          <div class="col-span-2 sm:col-span-2">
            <label
              for="id"
              class="block text-base font-medium leading-6 text-neutral-900"
            >
              Id producto
            </label>
            <div class="sm:mt-2">
              <input
                type="text"
                name="id"
                id="id"
                placeholder="id de producto"
                autocomplete="given-name"
                class="block w-full rounded-md border-0 px-2 py-1.5 text-neutral-900 shadow-sm outline-none ring-1 ring-inset ring-neutral-300 placeholder:text-neutral-400 hover:ring-1 hover:ring-amber-700 focus:ring-2 focus:ring-inset focus:ring-amber-600 sm:text-sm sm:leading-6"
                required
              />
            </div>
          </div>
          <!-- promocion -->
          <div class="col-span-2 sm:col-span-4">
            <label
              for="promocion"
              class="block text-base font-medium leading-6 text-neutral-900"
            >
              Promocion
              <small
                >Puede ser un precio especial, una rebaja, un porcentaje con
                cierto metodo de pago, etc.</small
              >
            </label>
            <div class="sm:mt-2">
              <input
                type="text"
                name="promocion"
                id="promocion"
                placeholder="promocion de producto"
                autocomplete="given-name"
                class="block w-full rounded-md border-0 px-2 py-1.5 text-neutral-900 shadow-sm outline-none ring-1 ring-inset ring-neutral-300 placeholder:text-neutral-400 hover:ring-1 hover:ring-amber-700 focus:ring-2 focus:ring-inset focus:ring-amber-600 sm:text-sm sm:leading-6"
                required
              />
            </div>
          </div>

          <!-- Imagen principal -->
          <div class="col-span-2 my-4">
            <h4
              for="cover-photo"
              class="block text-sm font-medium leading-6 text-gray-900"
            >
              Imagen principal
            </h4>
            <!-- for="file-upload" -->
            <div
              class="group relative mt-2 max-w-64 flex justify-center items-center rounded-lg overflow-hidden border border-dashed border-gray-900/25 px-6 py-10 aspect-square"
            >
              <div
                id="contenedor_subir_imagen_principal"
                class="my-2 flex text-center flex-col justify-center text-sm leading-6 text-gray-600"
                style="display: flex"
              >
                <svg
                  class="mx-auto h-12 w-12 text-gray-300"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  aria-hidden="true"
                >
                  <path
                    fill-rule="evenodd"
                    d="M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z"
                    clip-rule="evenodd"
                  />
                </svg>
                <label
                  for="input_imagen_principal"
                  class="relative rounded-md cursor-pointer bg-orange-300 px-1 py-0.5 font-semibold text-orange-100 transition-colors duration-150 focus-within:outline-none focus-within:ring-2 focus-within:ring-orange-600 focus-within:ring-offset-2 hover:text-orange-400 hover:bg-orange-200"
                >
                  <span>Subí una imagen</span>
                  <input
                    onchange="loadFile(event, 'principal')"
                    id="input_imagen_principal"
                    name="imagen_principal"
                    type="file"
                    class="sr-only"
                    accept="image/*"
                  />
                </label>
                <p class="text-xs leading-5 text-gray-600">
                  PNG, JPG, JPEG, WEBP or AVIF
                </p>
              </div>

              <img
                id="imagen_principal"
                class="absolute z-0 inset-0 w-full h-full object-cover object-center opacity-30 transition-opacity group-hover:opacity-50 select-none pointer-events-none touch-none"
              />
              <div
                id="contenedor_mostrando_imagen_principal"
                class="absolute z-10 w-full h-full flex-col justify-center items-center gap-2"
                style="display: none"
              >
                <p
                  id="texto_descriptivo_imagen_principal"
                  class="text-orange-300 w-[90%] mx-auto text-sm text-center font-medium px-2 py-1 bg-neutral-800/50 rounded-md"
                ></p>
                <button
                  type="button"
                  class="rounded-md cursor-pointer bg-orange-300 px-2 py-1 font-semibold text-orange-100 transition-colors hover:text-orange-400 hover:bg-orange-200"
                  onclick="cancelarImagenSeleccionada('principal')"
                >
                  Cancelar
                </button>
              </div>
            </div>
          </div>
          <script>
            let cancelarImagenSeleccionada = function (id) {
              const contenedor_mostrando_imagen = document.getElementById(
                "contenedor_mostrando_imagen_" + id
              )
              const contenedor_subir_imagen = document.getElementById(
                "contenedor_subir_imagen_" + id
              )

              document.getElementById("input_imagen_" + id).value = ""
              document.getElementById("imagen_" + id).src = ""
              document.getElementById("imagen_" + id).style.display = "none"

              contenedor_mostrando_imagen.style.display = "none"
              contenedor_subir_imagen.style.display = "flex"
            }

            let loadFile = function (event, id) {
              const contenedor_mostrando_imagen = document.getElementById(
                "contenedor_mostrando_imagen_" + id
              )
              const contenedor_subir_imagen = document.getElementById(
                "contenedor_subir_imagen_" + id
              )
              const imagen = document.getElementById("imagen_" + id)

              let file = event.target.files[0]
              imagen.src = URL.createObjectURL(file)
              imagen.alt = imagen.title = file.name
              document.getElementById("imagen_" + id).style.display = "block"

              contenedor_mostrando_imagen.style.display = "flex"
              contenedor_subir_imagen.style.display = "none"

              document.getElementById(
                "texto_descriptivo_imagen_" + id
              ).textContent = `Imagen: ${
                file.name
              }. Tiene un peso de ${returnFileSize(file.size)}.`

              imagen.onload = function () {
                URL.revokeObjectURL(imagen.src)
              }
            }

            function returnFileSize(number) {
              if (number < 1024) {
                return `${number} bytes`
              } else if (number >= 1024 && number < 1048576) {
                return `${(number / 1024).toFixed(1)} KB`
              } else if (number >= 1048576) {
                return `${(number / 1048576).toFixed(1)} MB`
              }
            }
          </script>
        </div>
      </div>

      <!-- Submit button -->
      <div class="mt-6 flex items-center justify-end gap-x-6">
        <button
          type="submit"
          class="group/link flex w-48 items-center justify-center gap-2 px-4 py-2 text-base font-medium text-orange-600 transition-all duration-300 transform bg-orange-200 rounded hover:bg-orange-400 hover:text-orange-900 focus:bg-orange-400 focus:outline-none"
        >
          Publicar
        </button>
      </div>
    </form>
  </div>
</div>

{% endblock %}
